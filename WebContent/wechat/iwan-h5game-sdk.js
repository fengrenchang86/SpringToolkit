(function(){var d=window;var k=document;var u=d.localStorage;var l="http://5g.baidu.com/";var s="http://5g.baidu.com/ajax/getad";var b="http://vs-static.baidu.com/xiaoyouxi/mobile/common/stat.js";var t="http://tc-sf-tmc01.tc.baidu.com:8501/ecomui/xiaoyouxi?controller=ajax&action=score";var h="http://vs-static.baidu.com/xiaoyouxi/mobile/common/img/share.png";var n=false;var q={href:"http://iwan.baidu.com/xxx_xiaoyouxi/xyz_abc/games/icebucket/index.html?score=70.81",ua:d.navigator.userAgent,ready:function(z){if(n){z()}else{k.addEventListener("DOMContentLoaded",function(){z()},false)}}};q.ready(function(){n=true});var v=d.location.search.indexOf("app=1")!==-1;var e="";var j="";var y={icon:"http://iwan.baidu.com/xxx_xiaoyouxi/static/icon/iwan256.png",link:"http://iwan.baidu.com/xxx_xiaoyouxi/xyz_abc/games/icebucket/index.html?score=70.81",title:document.title,content:document.title};var x={events:{},on:function(z,A){if(typeof z==="string"&&typeof A==="function"){if(!this.events[z]){this.events[z]=[]}this.events[z].push(A)}},trigger:function(z){if(this.events[z]){this.events[z].forEach(function(A){A()})}}};var c={loadScript:function(z){(k.getElementsByTagName("head")[0]||k.body).appendChild(k.createElement("script")).src=z},log:function(B){var A="?type=ih5game&inApp="+(v?"1":"0");for(var z in B){if(B.hasOwnProperty(z)){A+="&"+encodeURIComponent(z)+"="+encodeURIComponent(B[z])}}this.loadScript(b+A)},logScore:function(A){var z=c._getSessionToken();this.loadScript(t+(t.indexOf("?")===-1?"?":"&")+"id="+e+"&score="+A+"&token="+encodeURIComponent(j)+"&sessiontoken="+encodeURIComponent(z))},setAppId:function(z){e=z},setToken:function(z){j=z},_setSessionToken:function(z){u.setItem("ih5game-session-token-"+e,z||"")},_getSessionToken:function(){return u.getItem("ih5game-session-token-"+e)||""},goHome:function(){"http://iwan.baidu.com/xxx_xiaoyouxi/xyz_abc/games/icebucket/index.html?score=70.81"=l+(v?"?app=1":"")},share:{set:function(A,B){if(typeof A==="string"){y[A]=B}else{if(typeof A==="object"&&typeof B==="undefined"){for(var z in A){if(A.hasOwnProperty(z)){y[z]=A[z]}}}}},show:function(){var A=k.createElement("div");A.style.cssText="position:fixed;top:0;left:0;right:0;bottom:0;background:#000;z-index:11000;opacity:0.7;overflow:hidden;";var z=k.createElement("img");z.src=h;z.style.cssText="width:100%;";A.appendChild(z);k.body.appendChild(A);A.addEventListener("touchstart",function(){k.body.removeChild(A)})},on:function(A,z){x.on(A,z)}}};c.activity={_lottery:null,_loadTemplate:function(A,C){var z=window.XMLHttpRequest?new XMLHttpRequest():new ActiveXObject("Microsoft.XMLHTTP");z.open("GET",A,false);z.send(null);if(z.status>=200&&z.status<300){var B=k.createElement("div");B.innerHTML=z.responseText;B.id=C;B.style.cssText="display:none";k.body.appendChild(B)}},setLottery:function(){if(this._lottery){return}var z="iwan-ih5game-lottery";this._loadTemplate("./activities/lottery.html",z);this._lottery=k.getElementById(z);if(typeof $==="undefined"){c.loadScript("./lib/jquery.min.js")}c.loadScript("./lib/jquery.rotate.min.js");c.loadScript("./activities/lottery.js")},showLottery:function(){this._lottery.style.display="block"},hideLottery:function(){this._lottery.style.display="none"},};var o=false;var p=function(){};var w=function(z){p=z};var a=false;var m=[];var r=k.createElement("div");r.style.cssText="z-index:10010;display:none;position:fixed;top:0;left:0;right:0;bottom:0;background:#000;opacity:0.7;overflow:hidden;";var g=k.createElement("div");g.style.cssText="z-index:10001;display:none;position:fixed;left:0;right:0;bottom:0;height:50px;background:#000;";var i=k.createElement("div");i.style.cssText="z-index:10011;display:none;position:fixed;left:50%;top:50%;width:240px;height:320px;margin-top:-160px;margin-left:-120px;";c.ad={_setAds:function(E,B,C){m=E;k.body.appendChild(g);k.body.appendChild(i);k.body.appendChild(r);for(var A=0;A<m.length;A++){var H=m[A];var G=H.type;var I=k.createElement("div");if(G==="overlay"){var z=k.createElement("div");z.style.cssText="position:absolute;top:0;left:0;bottom:0;right:0;overflow:hidden;-webkit-border-radius:10px;border-radius:10px;";I.style.cssText="position:absolute;right:-10px;top:-10px;width:24px;height:24px;-webkit-border-radius:50%;background:#fff url(http://iwan.baidu.com/xxx_xiaoyouxi/static/img/close.png) no-repeat;background-size:24px 24px;";z.innerHTML='<a class="iwan-ih5game-ad" href="'+m[A].url+'"><img src="'+m[A].image+'" width="240" height="320"></a>';i.appendChild(z);i.appendChild(I);I.addEventListener("touchstart",function(){c.ad.hideOverlay()},false);a=true}else{if(G==="banner"){var D=k.createElement("a");if(H.style==="icon-text"){D.style.cssText="display:block;padding-left:50px;height:50px;color:#fff;line-height:50px;font-size:14px;text-decoration:none;background:url("+H.image+") 5px 5px no-repeat;-webkit-background-size:40px 40px;";D.innerText=H.text}else{if(H.style==="image"){D.style.cssText="display:block;height:50px;background:url("+H.image+") 50% 0 no-repeat;-webkit-background-size:320px 50px;"}}D.href=H.url;D.className="iwan-ih5game-ad";I.style.cssText="position:absolute;right:3px;top:13px;width:24px;height:24px;-webkit-border-radius:50%;background:#fff url(http://iwan.baidu.com/xxx_xiaoyouxi/static/img/close.png) no-repeat;background-size:24px 24px;";g.appendChild(D);g.appendChild(I);I.addEventListener("touchstart",function(){c.ad.hideBanner()},false);o=true;p()}}}console.log(B,C);c._setSessionToken(C);var F=new c.Anti({imTimeSign:B});F.bind()},banner:function(){if(o){g.style.display="block"}else{w(function(){g.style.display="block"})}},overlay:function(){if(a){r.style.display="block";i.style.display="block"}},hideBanner:function(){g.style.display="none"},hideOverlay:function(){r.style.display="none";i.style.display="none"},_fetch:function(){var z=c._getSessionToken();c.loadScript(s+(s.indexOf("?")===-1?"?":"&")+"id="+e+(v?"&app=1":"")+"&ua="+encodeURIComponent(q.ua)+"&token="+encodeURIComponent(j)+"&sessiontoken="+encodeURIComponent(z))}};q.ready(function(){c.log({id:e,pv:"1",page:q.href,ua:q.ua});c.ad._fetch()});var f=function(A){var z=JSON.stringify(A);if(/cancel/.test(z)){x.trigger("cancel")}else{x.trigger("complete");c.log({event:"share-complete"})}};document.addEventListener("WeixinJSBridgeReady",function(){WeixinJSBridge.on("menu:share:appmessage",function(){WeixinJSBridge.invoke("sendAppMessage",{img_url:y.icon,link:y.link,desc:y.content,title:y.title},f)});WeixinJSBridge.on("menu:share:timeline",function(){WeixinJSBridge.invoke("shareTimeline",{img_url:y.icon,img_width:640,img_height:640,link:y.link,desc:y.content,title:y.content},f)})},false);d.ih5game=c;(function(B){var z=function(T){var al,Z,ae,S,K,J,X,aj,aa,M,ab,G,Q,Y,af,R,ad,W=10,ak=/\d+/;T=T||{};al=T.main||document.body;Z=0;ae=0;S=0;K=0;J=0;aj=0;aa=0;M=0;ab=0;G=0;Q="none";Y=0;af=0;R="none";ad=T.imTimeSign;if(ak.test(ad)){ad=parseInt(ad,10)}else{throw new Error("imTimeSign is not a number, imTimeSign value is "+ad)}I();function I(){al.addEventListener("touchstart",ah,true);al.addEventListener("touchend",ac,true);al.addEventListener("touchmove",ai,true);window.addEventListener("scroll",ag,true)}function E(){al.removeEventListener("touchstart",ah);al.removeEventListener("touchend",ac);al.removeEventListener("touchmove",ai);window.removeEventListener("scroll",ag)}function ah(am){var an=am.touches.item(0);K=an.pageX;J=an.pageY;C();Z=L(am)}function ac(am){ae=L(am);S=ae-Z}function ai(am){U(am)}function U(am){ag(am)}function ag(ao){if(!X){X=true;aa=window.scrollY}var ap=window.scrollY;var an=Math.abs(ap-aj);var am=F(aj,ap)||Q;if(D(an,am)){G=L(ao);if(R=="none"){R=Q;M=L(ao)}if(R!=Q){V();M=L(ao);R=Q}}aj=ap}function C(){if(X&&R!="none"){V();af=0;X=false;Q="none"}}function D(an,am){if(Q=="none"){Q=am}if(am!=Q){Q=am;af=0}else{af+=an}return af>W}function F(am,an){if(an>am){return"up"}else{if(an<am){return"down"}else{return false}}}function V(){Y++;ab+=G-M;R="none"}function P(an){if(typeof an!="string"){return false}var am=O(an,ad,S,K);if(am!==false){return[am,S,K,J,Y,ab].join(".")}else{return false}}function N(an){var am=P(an),ao=/&ck=[\w.]*/;if(am===false){return an}if(an.indexOf("&ck=")==-1){an+="&ck="+am}else{an=an.replace(ao,"&ck="+am)}return an}function H(){Y=0;ab=0}function O(am,an,aq,au){var av=/\?url\=([^\.]+)\./,at,ap=0;if((at=av.exec(am))){var ao=(((aq*an)%99)+9);for(var ar=0;ar<ao;++ar){ap+=at[1].charCodeAt((au*ar)%at[1].length)}return ap}return false}function L(an){if(an.timeStamp!==0){return an.timeStamp}else{var am=new Date();return am.getTime()}}return{addCkOnUrl:N,clearCount:H,unBind:E}};var A=function(F){F=F||{};var E=F.imTimeSign;var D=F.main||document;var C=F.selector||".iwan-ih5game-ad";this.main=D;this.selector=C;this.ck=new z({main:D,imTimeSign:E})};A.prototype.bind=function(){var D=this.main;var C=this.selector;var E=this.ck;var H=Array.prototype.slice.call(D.querySelectorAll(C));H.forEach(function(I){I._click_event=function(J){G(J.target,I)};I.addEventListener("click",I._click_event,true)});function G(M,J){var I=M;while(I!=null&&I.tagName.toUpperCase()!="A"&&I!=J){I=I.parentNode}if(I==null){return}var K=I.getAttribute("data-link");var L=I.hasAttribute("data-link-close");if(K&&!L){F(E.addCkOnUrl(K));E.clearCount()}else{if(I.tagName.toUpperCase()=="A"&&I.href!==""&&/\?url\=([^\.]+)\./.test(I.href)){I.href=E.addCkOnUrl(I.href);E.clearCount()}}}function F(J){var L=+new Date(),I="WISE_ALADDIN_LOG_"+L,K=window[I]=new Image();K.onload=K.onerror=K.onabort=function(){K.onload=K.onerror=K.onabort=null;K=null;window[I]=null};K.src=J}};A.prototype.dispose=function(){var D=this.main;var C=this.selector;var E=Array.prototype.slice.call(D.querySelectorAll(C));E.forEach(function(F){F._click_event&&F.removeEventListener("click",F._click_event)});this.ck.unBind();this.ck=null;this.main=this.selector=null};B.Anti=A})(c)})();var _hmt=_hmt||[];(function(){var b=document.createElement("script");b.src="//hm.baidu.com/hm.js?28df2ca8df50359ec0a68c59ecf336c4";var a=document.getElementsByTagName("script")[0];a.parentNode.insertBefore(b,a)})();